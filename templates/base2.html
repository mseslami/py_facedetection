<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>


<div align="center" aria-orientation="horizontal">

    <div class="image-upload">
        <label for="file-input">
            <img src="/static/icons/gallery.png" style="width:100px; height:100px;" onclick="hidegallery()"/>
        </label>

        <input id="file-input" type='file' accept='image/*' style="display: none;" onchange='openFile(event)'>

        <img src="/static/icons/camera.png" style="width:100px; height:100px;" onclick='hidecamera()'>
    </div>
</div>


<div align="center" style="width:640px; height:400px; position: relative;">
    <div id="imageview" align="center"
         style="width:640px; height:400px; background:#FF9900;   position: absolute;">
        <div id="cameraShow" style="width:160px; height:100px; background-color:transparent; position: absolute;"></div>
        <img id="cameraPhoto"
             style="width:640px; height:400px; background:#00779900; ">

    </div>
    <div id="imageview2" align="center" style="width:640px; height:400px; background:#FF9938;   position: absolute; ">
        <img id="croppr" align="center"
             style=" background:#00FF99AA; ">
    </div>
    <div id="croppView" align="center"
         style="width:640px; height:400px; position: absolute; visibility:hidden;   background-color:transparent; "></div>

</div>


<div><h1 onclick="callCropper()">send to database</h1></div>

<!--image cropper-->
<!--http://deepliquid.com/content/Jcrop_Manual.html#Getting_Started-->
<script src="/static/to/js/jquery.min.js"></script>
<script src="/static/to/js/jquery.Jcrop.min.js"></script>
<link rel="stylesheet" href="/static/to/css/jquery.Jcrop.css" type="text/css"/>
<script></script>
<script></script>
<script language="Javascript">

  function showCoords(c)
  {
        console.log( c.x, c.y, c.x2, c.y2, c.w, c.h);
  };





</script>


<script language="Javascript">

function callCropper(){
    document.getElementById("croppView").style.visibility = "visible";



console.log("photo is being created")
var indexes;
$.get("/getmethodyy", function(data) {
    indexes = $.parseJSON(data)
    console.log(indexes[0])



    jQuery(function($) {
        <!--croppView-->
        $('#croppr').Jcrop({
            onSelect: showCoords,
            bgColor:     'black',
            bgOpacity:   .4,
            <!--setSelect:   [3,4,111,222],-->
            setSelect:   indexes[0],
        });
    });


})


}





</script>


<!--webcam access-->
<!--https://github.com/jhuckaby/webcamjs-->
<script src="/static/webcam/webcam.js"></script>

<!--<div id="my_camera" style="width:320px; height:240px;"></div>-->

<script language="JavaScript">
    Webcam.attach( '#cameraShow' );

    function take_snapshot() {
        Webcam.snap( function(data_uri) {
            document.getElementById('cameraPhoto').src= data_uri;


         $.ajax({
    type: "POST",
    url: "{{ url_for("get_post_json") }}",
    contentType: "application/json",
    data: JSON.stringify({hello: "world", hi : data_uri}),
    dataType: "json",
    success: function(response) {
        console.log(response);
    },
    error: function(err) {
        console.log(err);
    }
});

        } );
    }









</script>


<a href="javascript:void(take_snapshot())">Take Snapshot</a>

<!--adding existing file:-->
<script>
  var openFile = function(file) {
    var input = file.target;

    var reader = new FileReader();
    reader.onload = function(){
      var dataURL = reader.result;
      var output = document.getElementById('croppr');
      output.src = dataURL;






       $.ajax({
    type: "POST",
    url: "{{ url_for("get_post_json") }}",
    contentType: "application/json",
    data: JSON.stringify({hello: "world", hi : dataURL}),
    dataType: "json",
    success: function(response) {
        console.log(response);
    },
    error: function(err) {
        console.log(err);
    }
});


    };
    reader.readAsDataURL(input.files[0]);



  };










</script>
<!--<script>-->
<!--&lt;!&ndash;switch visibility&ndash;&gt;-->
<!--function toggleDisplay() {-->
<!--var mainFrameOne = document.getElementById("imageview");-->
<!--var mainFrameTwo = document.getElementById("imageview2");-->

<!--mainFrameOne.style.display = (-->
<!--mainFrameOne.style.display == "none" ? "block" : "none");-->
<!--mainFrameTwo.style.display = (-->
<!--mainFrameTwo.style.display == "none" ? "block" : "none");-->
<!--}-->
<!--</script>-->
<script>
    function hidegallery(){
    document.getElementById("imageview2").style.visibility = "visible";
    document.getElementById("imageview").style.visibility = "hidden";
    document.getElementById("croppView").style.visibility = "hidden";
}

    function hidecamera(){
    document.getElementById("imageview2").style.visibility = "hidden";
    document.getElementById("imageview").style.visibility = "visible";
    document.getElementById("croppView").style.visibility = "hidden";

}





</script>

</body>
</html>

